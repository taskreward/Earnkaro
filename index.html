<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Casino Dashboard</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/countup.js/2.0.7/countUp.min.js"></script>
  <style>
    /* (styles same as before: login + dashboard + modal, unchanged) */
    :root{--bg:#121212;--card-bg:#1E2430;--text-primary:#E0E3E8;--text-secondary:#A0A8B0;--accent-gold:#FFD700;--accent-green:#00E5FF;--accent-blue:#4B4EFF;}
    *{margin:0;padding:0;box-sizing:border-box;}
    body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text-primary);min-height:100vh;}
    .hidden{display:none;}
    .login-card{max-width:320px;margin:40px auto;background:var(--card-bg);padding:24px;border-radius:12px;box-shadow:0 4px 16px rgba(0,0,0,0.8);text-align:center;}
    .avatar{width:72px;height:72px;margin:0 auto 16px;background:var(--text-secondary);border-radius:50%;overflow:hidden;cursor:pointer;}
    .avatar img{width:100%;height:100%;object-fit:cover;}
    .avatar-placeholder{width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-size:2rem;color:var(--bg);}
    .login-card input{width:100%;padding:10px;margin-bottom:12px;border:none;border-radius:6px;background:#121526;color:var(--text-primary);font-size:1rem;}
    .login-card input::placeholder{color:#6B7280;}
    .login-card label.remember{display:flex;align-items:center;margin-bottom:16px;font-size:0.9rem;cursor:pointer;}
    .login-card label.remember input{margin-right:8px;width:16px;height:16px;}
    .login-card button{width:100%;padding:12px;background:var(--accent-blue);color:var(--bg);font-weight:600;border:none;border-radius:8px;font-size:1rem;cursor:pointer;transition:background 0.3s;}
    .login-card button:hover{background:#3A40D5;}
    .login-card .error{margin-top:12px;color:#FF6B6B;font-size:0.9rem;}
    #loginAvatarInput{display:none;}
    .dashboard{display:none;flex-direction:column;min-height:100vh;}
    header{background:var(--card-bg);padding:16px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 2px 8px rgba(0,0,0,0.8);}
    .user-info{display:flex;align-items:center;}
    .avatar-small{width:36px;height:36px;background:var(--text-secondary);border-radius:50%;overflow:hidden;margin-right:8px;cursor:pointer;}
    .avatar-small img{width:100%;height:100%;object-fit:cover;}
    .user-text .name{font-weight:600;}
    .user-text .meta{font-size:0.8rem;color:var(--text-secondary);}
    .withdraw-btn{background:var(--accent-gold);border:none;padding:8px 12px;border-radius:6px;color:var(--bg);font-weight:500;cursor:pointer;}
    .kpi-bar{display:flex;gap:12px;margin:24px 16px;}
    .kpi{flex:1;background:var(--card-bg);border:1px solid var(--text-secondary);padding:12px;border-radius:8px;text-align:center;}
    .kpi h3{color:var(--accent-gold);font-size:1.1rem;margin-bottom:4px;}
    .kpi p{color:var(--text-secondary);font-size:0.85rem;}
    nav.tabs{display:flex;background:var(--card-bg);}
    nav.tabs button{flex:1;padding:12px;background:none;border:none;color:var(--text-secondary);font-weight:600;cursor:pointer;position:relative;}
    nav.tabs button.active{color:var(--text-primary);}
    nav.tabs button.active::after{content:'';position:absolute;bottom:0;left:20%;right:20%;height:3px;background:var(--accent-gold);border-radius:2px;}
    .live-feed{margin:8px 16px;font-size:0.85rem;color:var(--accent-green);text-align:center;}
    .task-list{flex:1;overflow-y:auto;padding:16px;}
    .task-card{display:flex;align-items:center;justify-content:space-between;background:var(--card-bg);margin-bottom:12px;padding:16px;border-radius:12px;box-shadow:0 2px 6px rgba(0,0,0,0.8);transition:transform 0.1s;}
    .task-card:active{transform:scale(0.97);}
    .accent{width:6px;height:100%;border-radius:4px;margin-right:12px;}
    .task-info{flex:1;}
    .task-title{font-size:1rem;font-weight:600;}
    .task-meta{margin-top:4px;color:var(--text-secondary);font-size:0.85rem;}
    .btn-claim{padding:10px 20px;background:var(--accent-gold);color:var(--bg);border:none;border-radius:8px;font-weight:600;cursor:pointer;flex-shrink:0;}
    .modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);display:flex;align-items:center;justify-content:center;z-index:100;}
    .modal.hidden{display:none;}
    .modal-content{background:var(--card-bg);padding:24px;border-radius:12px;width:90%;max-width:320px;text-align:center;}
    .modal-content input{width:100%;padding:10px;margin:12px 0;border:none;border-radius:6px;background:#121526;color:var(--text-primary);}
    .modal-content button{margin:6px;padding:10px 16px;border:none;border-radius:6px;cursor:pointer;}
    #confirmWithdraw{background:var(--accent-green);color:var(--bg);}
    #closeWithdraw{background:var(--accent-blue);color:var(--bg);}
    .error-msg{margin-top:8px;color:#FF6B6B;font-size:0.9rem;}
  </style>
</head>
<body>
  <!-- Login -->
  <div id="view-login">
    <div class="login-card">
      <div class="avatar" id="loginAvatarLabel"><div class="avatar-placeholder">👤</div><img id="loginAvatarImg" src="" style="display:none"/></div>
      <input type="file" id="loginAvatarInput" accept="image/*"/>
      <h2>Login</h2>
      <input id="username" placeholder="Username"/>
      <input id="email" type="email" placeholder="Email"/>
      <input id="password" type="password" placeholder="Password"/>
      <label><input type="checkbox" id="rememberMe"/> Remember Me</label>
      <button id="loginBtn">Log In</button>
      <div class="error" id="error"></div>
    </div>
  </div>

  <!-- Dashboard -->
  <div id="view-dashboard" class="dashboard">
    <header><div class="user-info">
      <label class="avatar-small" id="dashAvatarLabel"><img id="dashAvatarImg" src="" style="display:none"/><svg id="dashPlaceholder" xmlns="http://www.w3.org/2000/svg" fill="#A0A8B0" viewBox="0 0 24 24"><circle cx="12" cy="8" r="4"/><path d="M12 14c-4 0-6 2-6 4v1h12v-1c0-2-2-4-6-4z"/></svg></label>
      <div class="user-text"><div class="name" id="displayUsername"></div><div class="meta" id="displayMeta"></div></div>
    </div><button class="withdraw-btn" id="withdrawBtn">Withdraw</button></header>
    <div class="kpi-bar"><div class="kpi"><h3 id="balanceDisplay">₹0</h3><p>Balance</p></div><div class="kpi"><h3>12</h3><p>Tasks Done</p></div><div class="kpi"><h3>₹120</h3><p>Weekly Win</p></div></div>
    <nav class="tabs"><button data-tab="daily" class="active">Daily</button><button data-tab="weekly">Weekly</button><button data-tab="monthly">Monthly</button></nav>
    <div class="live-feed">🎉 Ravi just won ₹500!</div><ul id="task-list" class="task-list"></ul>
  </div>

  <!-- Withdraw Modal -->
  <div id="withdrawModal" class="modal hidden"><div class="modal-content">
    <h3>Withdraw Funds</h3><input id="withdrawAmount" type="number" placeholder="Enter amount"/><button id="confirmWithdraw">Confirm</button><button id="closeWithdraw">Cancel</button><div class="error-msg" id="withdrawError"></div>
  </div></div>

  <script>
    const loginDiv = document.getElementById('view-login');
    const dashDiv = document.getElementById('view-dashboard');
    let currentBalance = 1280;

    function showLogin(){ loginDiv.classList.remove('hidden'); dashDiv.classList.add('hidden'); }
    function showDash(){ loginDiv.classList.add('hidden'); dashDiv.classList.remove('hidden'); }

    function setupAvatar(lab, inp, img, ph){
      const l = document.getElementById(lab), i = document.getElementById(inp), im = document.getElementById(img), phv = document.getElementById(ph);
      const stored = localStorage.getItem('avatarPhoto');
      if (stored) { im.src=stored; im.style.display='block'; phv.style.display='none'; }
      l.onclick = () => i.click();
      i.onchange = () => { const f=i.files[0]; if(!f) return; const r=new FileReader(); r.onload=e=>{
        im.src=e.target.result; im.style.display='block'; phv.style.display='none'; localStorage.setItem('avatarPhoto', e.target.result);
      }; r.readAsDataURL(f); };
    }
    setupAvatar('loginAvatarLabel','loginAvatarInput','loginAvatarImg','loginAvatarImg');
    setupAvatar('dashAvatarLabel','dashAvatarInput','dashAvatarImg','dashPlaceholder');

    document.getElementById('loginBtn').onclick = () => {
      const u = document.getElementById('username').value.trim();
      const e = document.getElementById('email').value.trim();
      const p = document.getElementById('password').value.trim();
      const err = document.getElementById('error');
      err.textContent = '';
      if (!u || !e || !p) { err.textContent = 'Fill all fields'; return; }
      if (document.getElementById('rememberMe').checked) {
        localStorage.setItem('loggedIn','true'); localStorage.setItem('username',u); localStorage.setItem('email',e);
      } else {
        sessionStorage.setItem('username',u); sessionStorage.setItem('email',e);
      }
      loadDashboard();
    };

    function loadDashboard(){
      const logged = localStorage.getItem('loggedIn') === 'true';
      const u = (logged ? localStorage : sessionStorage).getItem('username');
      const em = (logged ? localStorage : sessionStorage).getItem('email');
      if (!u || !em) { showLogin(); return; }
      document.getElementById('displayUsername').textContent = u;
      document.getElementById('displayMeta').textContent = `ID: 3038792 | ${em} | VIP0`;
      showDash(); animateBalance(); renderTasks('daily');
    }

    function animateBalance(){
      new CountUp('balanceDisplay', currentBalance, { duration: 2, prefix: '₹', useEasing: true, separator: ',' }).start();
    }

    const wdBtn = document.getElementById('withdrawBtn');
    const wdModal = document.getElementById('withdrawModal');
    const wdAmt = document.getElementById('withdrawAmount');
    const wdErr = document.getElementById('withdrawError');
    const confirmWd = document.getElementById('confirmWithdraw');
    const closeWd = document.getElementById('closeWithdraw');

    wdBtn.onclick = () => { wdAmt.value=''; wdErr.textContent=''; wdModal.classList.remove('hidden'); };
    closeWd.onclick = () => wdModal.classList.add('hidden');
    confirmWd.onclick = () => {
      const v = parseInt(wdAmt.value);
      if (!v || v <= 0) { wdErr.textContent = 'Invalid amount'; return; }
      if (v > currentBalance) { wdErr.textContent = 'Insufficient balance'; return; }
      currentBalance -= v; animateBalance(); wdModal.classList.add('hidden'); alert(`Withdrawal ₹${v} successful`);
    };

    const tasks = {
      daily:[{title:"🃏 Blackjack Bet",meta:"Live odds:3.5x",color:"var(--accent-gold)"},{title:"🎯 Roulette Spin",meta:"Win big now!",color:"var(--accent-gold)"},{title:"🎰 Slot Machine",meta:"Max payout ₹1000",color:"var(--accent-gold)"}],
      weekly:[{title:"🏆 Weekly Jackpot",meta:"Top prize ₹10,000",color:"var(--accent-gold)"}],
      monthly:[{title:"🎉 VIP Draw",meta:"Exclusive entries",color:"var(--accent-gold)"}]
    };

    function renderTasks(tab){
      const list = document.getElementById('task-list');
      list.innerHTML = '';
      tasks[tab].forEach(t => {
        const li = document.createElement('li');
        li.className = 'task-card';
        li.innerHTML = `<div class="accent" style="background:${t.color}"></div><div class="task-info"><div class="task-title">${t.title}</div><div class="task-meta">${t.meta}</div></div><button class="btn-claim">Claim</button>`;
        li.querySelector('button').onclick = () => alert(`Claimed: ${t.title}`);
        list.appendChild(li);
      });
    }

    document.querySelectorAll('nav.tabs button').forEach(btn => {
      btn.onclick = () => {
        document.querySelectorAll('nav.tabs button').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        renderTasks(btn.getAttribute('data-tab'));
      };
    });

    loadDashboard();
  </script>
</body>
</html>
